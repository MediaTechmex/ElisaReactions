/*! @castlabs/prestoplay 5.1.2, 15-11-2017 Copyright (c) 2017 castLabs GmbH, All Rights reserved */

(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("clpp"));else if(typeof define==="function"&&define.amd)define(["clpp"],factory);else if(typeof exports==="object")exports["clpp_nielsen"]=factory(require("clpp"));else root["clpp_nielsen"]=factory(root["clpp"])})(this,function(__WEBPACK_EXTERNAL_MODULE_1__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="/";return __webpack_require__(0)}({0:function(module,exports,__webpack_require__){__webpack_require__(1);module.exports=__webpack_require__(34);module.exports=__webpack_require__(35)},1:function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},34:function(module,exports){!function(e,t){function n(e){return"undefined"!=typeof s&&"undefined"!=typeof l&&"undefined"!=typeof u?s+"//cdn-gl"+l:"https://cdn-gl.imrworldwide.com/"}function r(e){e&&e.hasOwnProperty("target")&&(_="true"===String(e.target).toLowerCase())}function a(){w=Date.now(),O=Math.ceil((w-P)/1e3)}function i(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in m)!function(t){var n=m[t];if(void 0!==n&&n.hasOwnProperty("staticPage")&&n.staticPage.hasOwnProperty("evtParams")){var r=n.staticPage.evtParams;"static"===r.param1.type&&n.ggPM("48",e.target,"","","")}}(t)}function o(o){function p(e){N.staticPage.hasOwnProperty("evtParams")&&N.ggPM("56",N.staticPage.evtParams.param1,N.staticPage.evtParams.param2,N.staticPage.evtParams.param3,N.staticPage.evtParams.param4)}function v(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(C[e.type]instanceof Array)for(var n=C[e.type],r=0,a=n.length;r<a;r++)n[r].call(N,t)}function m(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var n in e.cmsMap)e.cmsMap.hasOwnProperty(n)&&e.cmsMap[n].indexOf("nol_")!==-1&&t.push(e.cmsMap[n].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function y(t){try{var n="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var r=m({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var a in t.fData)if(t.fData.hasOwnProperty(a)){var i=t.fData[a][Object.keys(t.fData[a]).splice(-1,1)];if("undefined"!=typeof i)for(var o in i){var s=String(o);s.indexOf("nol_")!==-1&&r.indexOf(s)===-1||(t[a][o]=i[o])}}return t}return t&&t.hasOwnProperty("err")?(t.err=n+": Missing passedFdata, Ad, content or static properties",t):{err:n}}catch(e){}}function h(t){t&&(t.registerListener("ggPM",N),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",N.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",N.removeAsset),t._listeners.addListener("tick",function(){a(),v("globalTick",{time:w,seconds:O})}),t._listeners.addListener("dcrHeartbeat",i),t._listeners.addListener("flushQueue",N.emptyQueue),t._listeners.addListener("handleSessionReset",N.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",N.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",r)),e.GLCFG=t)}function P(e){if("undefined"!=typeof e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry")){var n={requestUrl:function(){var t=this;try{return++e.currRetry>e.maxRetry?t.logErr("maxRetry reached"):t.sendUrlRequest(e.url)}catch(e){t.logErr("Error in fireToUrl requestUrl: "+e)}},sendUrlRequest:function(n){var r=this;try{if("undefined"==typeof n)return;var a=new Image;a.onerror=function(n){t.setTimeout(function(){r.requestUrl()},e.retryDelay)},a.onload=function(e){},a.src=n+"&retry="+e.currRetry}catch(e){r.logErr("Error in fireToUrl sendUrlRequest: "+e)}},logErr:function(e){e&&t.console&&t.console.log&&console.log("Error: ",e)}};n.requestUrl()}}var b,E,C={},S=[],D={},M=String(Date.now())+Math.round(1e4*Math.random()),I,F=5,j=-1,N={};N.id=M,N.name=o,N.initialized=!1,N.staticPage={},N.modules={allModInit:!1},N.configLoaded=!1,N.apid="",N.sdkv=d,N.sdkvForConfig=L;var T={_queueEventLog:!1,_eventLog:[],init:function(){try{var t=e.controllers.util.queryParam("nol_eventHookDelay");if(T._queueEventLog=!1,t){var n=parseInt(t);"NaN"!==n.toString()&&(T._queueEventLog=!0,setTimeout(function(){T._queueEventLog=!1},1e3*(n<=20?n:20)))}}catch(e){T._queueEventLog=!1}},trigger:function(t,n){try{if(n){var r=JSON.parse(JSON.stringify(n));r.name=t.name,T._queueEventLog?T._eventLog.push(r):(T._eventLog&&T._eventLog.length>0&&(e.controllers.util.fireCustomEvent("NSDK_EventHook",T._eventLog),T._eventLog=[]),e.controllers.util.fireCustomEvent("NSDK_EventHook",[r]))}}catch(e){}}},B=function(e,n){return function(r,a){try{n.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function(t){try{t.detail.instanceName===e&&r(t.detail.instance)}catch(e){a&&a(e.message)}}})}catch(e){a&&a(e.message)}}}(N.name,e);return N.getOptOutStatus=function(){return _},N.getId=function(){return M},N.GetName=function(){return N.name},N.Initialized=function(e){return"undefined"==typeof e?N.initialized:void(N.initialized=e)},N.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(D).length:0},N.removeAsset=function(e){"undefined"!=typeof e&&e.target.param1.hasOwnProperty("assetid")&&(N.staticPage={})},N.handleUpdateOfStatic=function(t){if(t&&t.target){var n=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&"undefined"!=typeof n&&n.param1.hasOwnProperty("assetid")&&N.getId()===t.target.plid){var r=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(N.staticPage).length&&N.staticPage.hasOwnProperty("id")&&N.staticPage.id===n.param1.assetid&&N.staticPage.hasOwnProperty("lastTimeStamp")?N.staticPage.lastTimeStamp=r:N.staticPage={id:n.param1.assetid,evtParams:n,startTimeStamp:r,lastTimeStamp:r}}}},N.addListener=function(e,t){t&&("undefined"==typeof C[e]&&(C[e]=[]),C[e].push(t))},N.removeListener=function(e,t){if(N._listeners[e]instanceof Array)for(var n=C[e],r=0,a=n.length;r<a;r++)if(n[r]===t){n.splice(r,1);break}},N.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&M===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===y(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var n=e.target.passedFdata._currVidType,r=Object.keys(t.content).length>0,a=Object.keys(t.ad).length>0;(r||a)&&(N.ggPM("57","1","","",""),r&&!D.hasOwnProperty("content")&&(D.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}))}}N._listeners&&N._listeners.fireEvent&&N._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},N.flushPauseEventQueue=function(){if(!(Object.keys(D).length<=0)){if(N.modules.PLDPR){var e;for(e in D)v("ggPM",{evtInfo:{eventType:D[e].evt,param1:D[e].meta},id:M});D={}}N._listeners&&N._listeners.fireEvent&&N._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},N.cloneObj=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},N.ggPM=function(e,t,n,r,a){if(N.initialized&&void 0!==e&&null!==e&&""!==e){var i={};i.eventType=e,i.param1=N.cloneObj(t),i.param2=N.cloneObj(n),i.param3=N.cloneObj(r),i.param4=N.cloneObj(a),!N.modules.allModInit||2!=N.modules.PLCMB&&2!=N.modules.PLDPR?S.push(i):(N.emptyQueue(),v("ggPM",{evtInfo:i,id:M}),T.trigger(N,i))}},N.getConfigParams=function(){return E},N.emptyQueue=function(){if(!(S.length<=0)&&N.modules.allModInit&&(N.modules.PLCMB||N.modules.PLDPR)){for(var e=0,t=S.length;e<t;e+=1)v("ggPM",{evtInfo:S[e],id:M}),T.trigger(N,S[e]);S=[]}},N.getContainer=function(){return I},N.ggInitialize=function(t,r,a,i,o,p){if(N.initialized)return k.Promise(function(e,t){e(N)});T.init();var v,m,y,P="us",w="cdn-gl";if(I=p,E={ggParams:t,uid:a,oldFlashDetect:i,detectBrowser:o,nol_playerId:M},typeof t==typeof String()){for(v=e.loadXmlString("<vi>"+t+"</vi>"),m=v.firstChild.firstChild,y=0,t={};m&&"undefined"!=typeof m&&y<20;)null!==m.firstChild&&(t[m.nodeName]=m.firstChild.nodeValue),m=m.nextSibling,y++;E.ggParams=t}return E.ggParams.nol_sdkDebug=e.controllers.util.queryParam("nol_sdkDebug")||E.ggParams.nol_sdkDebug,N.Initialized(!0),d=t.nsdkv||d,P=t.sfcode||P,g=s+u+P+l,f=t.coreaddress?s+"//"+t.coreaddress+"/":n(t),L=t.sdkconfigver||L,N.apid=E.ggParams.apid,N.sdkv=d,e.loadLib("GLCFG",f+"novms/js/2/configs/"+c,e,h),k.Promise(B)},N.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function(e){N&&N.staticPage&&p(N.staticPage)}}),N}if(!e.isBuilt||!e.isBuilt()){var s=t.location.protocol.indexOf("https")!==-1?"https:":"http:",u="//secure-",l=".imrworldwide.com/",c="glcfg510.js",d="510",f=n(),g=s+"//secure-us.imrworldwide.com/",p="imrworldwide.com",v=864e5,m=e.getInstances?e.getInstances():{},y=1,h=5,P=0,w=0,O=0,b=!1,_=!1,E="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",L="bj.5.0.0",C="5.1.0.42";Date.now=Date.now||function(){return+new Date};var k={Promise:function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}var n=function(e){var t=function(e){r&&r(e)},n=function(e){a&&a(e)},r=null,a=null;return{then:function(i,o){r=i,a=o,e(t,n)}}};return new n(e)}};if(e.sdkvForConfig=function(){return L},e.isBuilt=function(){return b},e.getInstance=function(e){var t="undefined"!=typeof e&&("string"==typeof e||"object"==typeof e&&e.constructor===String)?e:"default";return m.hasOwnProperty(t)||(m[t]=o(t)),m[t]},e.setTotalNumAssetsAllowed=function(e){y=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return f},e.getConfigAddress=function(){return g},e.getInstances=function(){return m},e.loadXmlString=function(e){var t=null;try{return t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e),t}catch(r){try{var n=new DOMParser;return t=n.parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if("undefined"!=typeof e){var n=e.indexOf("?"),r=e.indexOf(p);r>-1&&r<n&&(t=!0)}return t},e.getVersion=function(){return d},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){"undefined"!=typeof e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){void 0!==e&&null!==e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},e.controllers={util:function(e){!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"!=typeof t.CustomEvent&&(e.prototype=t.Event.prototype,void(t.CustomEvent=e))}();var n={fireCustomEvent:function(n,r,a){try{a=a||t,n&&a&&a.dispatchEvent(new CustomEvent(n,{detail:r}))}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}}},r={queryParam:function(n){try{n=n.toString().toLowerCase();var r=t.location.search.substr(1).split("&"),a="";if(r.find)a=r.find(function(e){return 0===e.toLowerCase().indexOf(n+"=")});else for(var i=0,o=r.length;i<o;i++)if(0===r[i].toLowerCase().indexOf(n+"=")){a=r[i];break}if(a){var s=a.split("=");if(s&&s.length>1)return s[1]}}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""}};return{fireCustomEvent:n.fireCustomEvent,queryParam:r.queryParam}}(e)},function(){var n={};e.loadLib=function(e,r,a,i){if(void 0!==e&&null!==e&&"string"==typeof e&&void 0!==r&&null!==r&&"string"==typeof r)if(n[e]){if(n[e].body)return void i(n[e].body(a));n[e].callbacks.push({func:i,arg:a})}else{n[e]={callbacks:[]},n[e].callbacks.push({func:i,arg:a});var o=t.document.createElement("script");o.async=!0,o.src=r,t.document.getElementsByTagName("head")[0].appendChild(o)}},e.registerLib=function(e,t){try{if(n){var r=n[e];r.body=t;for(var a=r.callbacks.shift();a;)a.func(r.body(a.arg)),a=r.callbacks.shift()}}catch(e){}}}(),t.gg_nol_FlashCallBack){for(var S=0,D,M=t.gg_nol_FlashCallBack.length;S<M;S+=1)t.gg_nol_FlashCallBack[S].hasOwnProperty("callBack")&&(D=document.getElementById(t.gg_nol_FlashCallBack[S].swfId),D&&D[t.gg_nol_FlashCallBack[S].callBack]());t.gg_nol_FlashCallBack=void 0}return b||(b=!0,P=w=Date.now(),e.BUILDVERSION=C),e}}(window.NOLCMB=window.NOLCMB||{},window)},35:function(module,exports){var _0x8256=["definePlugin","ima","getAdsManager","min","getDuration","currentTime","ended","ggPM","setPlayheadPosition","log","apply","loadMetadata","getAd","getAdPodInfo","getPodIndex","midroll","preroll","nielsen plugin","onInit","undefined","debug","nol_sdkDebug","console","getInstance","instanceName","onDestroy","onVideoAttached","onBitrateChanged","onStop","onPlay","metadata","onPause","duration","NIELSEN CONTENT stop","stop","NIELSEN CONTENT end","end","onAdStarted","metadataTransformer","adType","AD_TYPES","POSTROLL","function","NIELSEN AD loadMetadata","NIELSEN AD Playhead","onAdFinished","NIELSEN AD stop","NIELSEN CONTENT loadMetadata","start","object","amd"];(function(_0x219f3e,_0x232c65){var _0x304da0=function(_0x20884d){while(--_0x20884d){_0x219f3e["push"](_0x219f3e["shift"]())}};_0x304da0(++_0x232c65)})(_0x8256,406);var _0x6825=function(_0x177bc9,_0x247f4a){_0x177bc9=_0x177bc9-0;var _0x2bc015=_0x8256[_0x177bc9];return _0x2bc015};!function(e,t){"object"==typeof exports&&_0x6825("0x0")==typeof module?module["exports"]=t():"function"==typeof define&&define[_0x6825("0x1")]?define([],t):"object"==typeof exports?exports["clpp_nielsen"]=t():e["clpp_nielsen"]=t()}(this,function(){return webpackJsonpclpp__name_([12],[function(e,t,i){function n(){}var r=i(1),s="clpp_nielsen";r[_0x6825("0x2")](s,t);var o=i(34),a=i(17),c=1e3;t["registerPlugin"]=function(e,t){function i(e,t){var i=t[_0x6825("0x3")][_0x6825("0x4")](),n=i["getRemainingTime"]()||0;return n}function r(e,t){var n=i(e,t),r=e["getAd"]()["getDuration"]()-n;return Math[_0x6825("0x5")](r,e["getAd"]()[_0x6825("0x6")]())}function s(e,t){null===y&&(y=setInterval(function(){var i=t[_0x6825("0x7")]();t[_0x6825("0x8")]()?u():(l("NIELSEN CONTENT Playhead",i),e[_0x6825("0x9")](_0x6825("0xa"),i))},c))}function u(){null!==y&&(clearInterval(y),y=null)}function d(e,t,n){var s=0,o=i(t,e);null===v&&(v=setInterval(function(){s=r(t,e),s<o?n(s):h()},c))}function h(){null!==v&&(clearInterval(v),v=null)}function l(){m&&console[_0x6825("0xb")][_0x6825("0xc")](null,arguments)}function p(e,t){A&&(A=!1,e[_0x6825("0x9")](_0x6825("0xd"),t),l("NIELSEN CONTENT loadMetadata",t))}function f(e){var t=e[_0x6825("0xe")]()[_0x6825("0xf")]()[_0x6825("0x10")]();switch(t){case 1:return _0x6825("0x11");case 0:return _0x6825("0x12");case-1:return"postroll";default:return""}}var _,g=new o(_0x6825("0x13"),t),m=!1,y=null,A=!0,v=null;g[_0x6825("0x14")](function(e,t,i){var n;return _=a["getNielsenOptions"](i),u(),h(),_0x6825("0x15")==typeof _[_0x6825("0x16")]&&(_[_0x6825("0x16")]=i[_0x6825("0x16")]),_[_0x6825("0x16")]&&(m=!0,_[_0x6825("0x17")]=_0x6825("0x18")),n=NOLCMB[_0x6825("0x19")](_[_0x6825("0x1a")]),n["ggInitialize"](_),n}),g["onLoadedMetaData"](n),g[_0x6825("0x1b")](n),g[_0x6825("0x1c")](n),g[_0x6825("0x1d")](n),g[_0x6825("0x1e")](n),g["onCustomEventRequested"](n),g["onError"](n),g["onPlaying"](n),g[_0x6825("0x1f")](function(e,t,i){p(e,_[_0x6825("0x20")]),s(e,i)}),g[_0x6825("0x21")](function(e,t,i){var n=i[_0x6825("0x7")](),r=i[_0x6825("0x22")]()===n;r||(l(_0x6825("0x23"),n),e[_0x6825("0x9")](_0x6825("0x24"),n),u())}),g[_0x6825("0x1b")](function(e,t,i){u();var n=i[_0x6825("0x7")]();l(_0x6825("0x25"),n),A=!0,e[_0x6825("0x9")](_0x6825("0x26"),n)}),g[_0x6825("0x27")](function(e,t,i,n){var r={adType:f(n)},s=_[_0x6825("0x28")];r[_0x6825("0x29")]===a[_0x6825("0x2a")][_0x6825("0x2b")]&&(A=!1),p(e,_["metadata"]),s&&_0x6825("0x2c")==typeof s&&s(r),l(_0x6825("0x2d"),r),e[_0x6825("0x9")](_0x6825("0xd"),r),d(i,n,function(t){l(_0x6825("0x2e"),t),e[_0x6825("0x9")](_0x6825("0xa"),t)})}),g[_0x6825("0x2f")](function(e,t,i,n){var r=f(n),s=n[_0x6825("0xe")]()[_0x6825("0x6")]();l(_0x6825("0x30"),s),e["ggPM"](_0x6825("0x24"),s),r!==a["AD_TYPES"][_0x6825("0x2b")]?(l(_0x6825("0x31"),_[_0x6825("0x20")]),e[_0x6825("0x9")]("loadMetadata",_["metadata"])):A=!0}),g[_0x6825("0x32")]()}}])})}})});
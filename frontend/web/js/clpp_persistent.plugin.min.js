/*! @castlabs/prestoplay 5.1.2, 15-11-2017 Copyright (c) 2017 castLabs GmbH, All Rights reserved */

(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["clpp_persistent"]=factory();else root["clpp_persistent"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="/";return __webpack_require__(0)}({0:function(module,exports,__webpack_require__){module.exports=__webpack_require__(37)},37:function(module,exports){var _0x099a=['DRM: widevine update, XHR timeout. status is "',"timeout","open","POST","responseType","arraybuffer","onload","onabort","onerror","ontimeout","send","message","then","generateRequest","catch","generating request for session failed","requestMediaKeySystemAccess","keySystem","offlineConfig","basicConfig","Unable to instantiate a key system supporting the required combinations","createSession","sessionType","setServerCertificate","serverCertificate","update","couldn't update session with downloaded license","licenseUrl","licenseRequest","sessionId","createMediaKeys","setTimeout","load","createPersistentSession","removePersistentSession","object","exports","function","amd","clpp_persistent","com.widevine.alpha","required","persistent-license",'video/mp4;codecs="avc1.42c00c"','audio/mp4;codecs="mp4a.40.2"',"SW_SECURE_CRYPTO","status","response","byteLength","fromCharCode","trim","indexOf","lastIndexOf","parse","base64ToArr","license",'DRM: widevine update, XHR aborted. status is "',"statusText",'" (',"), readyState is ","readyState","NONE","responseURL",'DRM: widevine update, XHR Error. status is "'];(function(_0x472b48,_0x4a5748){var _0x4d9a8e=function(_0x2ff46c){while(--_0x2ff46c){_0x472b48["push"](_0x472b48["shift"]())}};_0x4d9a8e(++_0x4a5748)})(_0x099a,291);var _0xa099=function(_0x5d7e5b,_0x2c3662){_0x5d7e5b=_0x5d7e5b-0;var _0x38095b=_0x099a[_0x5d7e5b];return _0x38095b};!function(e,t){_0xa099("0x0")==typeof exports&&"object"==typeof module?module[_0xa099("0x1")]=t():_0xa099("0x2")==typeof define&&define[_0xa099("0x3")]?define([],t):_0xa099("0x0")==typeof exports?exports[_0xa099("0x4")]=t():e[_0xa099("0x4")]=t()}(this,function(){return webpackJsonpclpp__name_([8],{0:function(e,t,i){var n=i(132);e["exports"]=n},132:function(e,t,i){function n(e){var t=_0xa099("0x5"),i=_0xa099("0x6"),n=_0xa099("0x7"),r=[{contentType:_0xa099("0x8"),robustness:"SW_SECURE_DECODE"}],s=[{contentType:_0xa099("0x9"),robustness:_0xa099("0xa")}],o={keySystem:t,sessionType:n,basicConfig:{audioCapabilities:s,videoCapabilities:r},offlineConfig:{audioCapabilities:s,videoCapabilities:r,persistentState:i,sessionTypes:[n]},serverCertificate:e};return o}function r(e,t,i,n){return new Promise(function(r,s){function o(){if(200==this[_0xa099("0xb")]){var e;n(this);for(var t=new Uint8Array(this[_0xa099("0xc")]),i="",s=0;s<t[_0xa099("0xd")];++s)i+=String[_0xa099("0xe")](t[s]);var o=i[_0xa099("0xf")]();if(0==o[_0xa099("0x10")]("{")&&o[_0xa099("0x11")]("}")==o["length"]-1){var a;try{a=JSON[_0xa099("0x12")](i)}catch(e){}e=u[_0xa099("0x13")](a[_0xa099("0x14")])}else e=t;r(e)}}function a(){s({message:_0xa099("0x15")+h[_0xa099("0x16")]+_0xa099("0x17")+h[_0xa099("0xb")]+_0xa099("0x18")+h[_0xa099("0x19")],response:_0xa099("0x1a"),status:h["status"],statusText:h[_0xa099("0x16")],responseURL:h[_0xa099("0x1b")]})}function c(){s({message:_0xa099("0x1c")+h[_0xa099("0x16")]+_0xa099("0x17")+h[_0xa099("0xb")]+_0xa099("0x18")+h[_0xa099("0x19")],response:_0xa099("0x1a"),status:h[_0xa099("0xb")],statusText:h[_0xa099("0x16")],responseURL:h[_0xa099("0x1b")]})}function d(){s({message:_0xa099("0x1d")+h[_0xa099("0x16")]+_0xa099("0x17")+h[_0xa099("0xb")]+"), readyState is "+h[_0xa099("0x19")],response:_0xa099("0x1a"),status:h[_0xa099("0xb")],statusText:h[_0xa099("0x16")],responseURL:h[_0xa099("0x1b")]})}var h=new XMLHttpRequest;h[_0xa099("0x1e")]=1e4,h[_0xa099("0x1f")](_0xa099("0x20"),t,!0),h[_0xa099("0x21")]=_0xa099("0x22"),h[_0xa099("0x23")]=o,h[_0xa099("0x24")]=a,h[_0xa099("0x25")]=c,h[_0xa099("0x26")]=d,i(h),h[_0xa099("0x27")](e)})}function s(e,t,i,n,s){return new Promise(function(o,a){e["addEventListener"]("message",function(e){var t=e[_0xa099("0x28")];r(t,i,n,s)[_0xa099("0x29")](function(e){o(e)},function(e){a(e)})}),e[_0xa099("0x2a")]("cenc",t)[_0xa099("0x29")](function(){})[_0xa099("0x2b")](function(){a(_0xa099("0x2c"))})})}function o(e,t,i,n,r){return new Promise(function(o,a){navigator[_0xa099("0x2d")](e[_0xa099("0x2e")],[e[_0xa099("0x2f")],e[_0xa099("0x30")]])[_0xa099("0x29")](function(e){return e["createMediaKeys"]()})["catch"](function(){a(_0xa099("0x31"))})[_0xa099("0x29")](function(c){var d=c[_0xa099("0x32")](e[_0xa099("0x33")]);c[_0xa099("0x34")](e[_0xa099("0x35")]);var h=u[_0xa099("0x13")](t)["buffer"];s(d,h,i,n,r)[_0xa099("0x29")](function(e){d[_0xa099("0x36")](e)[_0xa099("0x29")](function(){o(d)})[_0xa099("0x2b")](function(){a(_0xa099("0x37"))})},a)})[_0xa099("0x2b")](function(){a(_0xa099("0x31"))})})}function a(e){var t=n(e[_0xa099("0x35")]),i=e[_0xa099("0x38")],r=e["pssh"],s=e[_0xa099("0x39")];_0xa099("0x2")!=typeof s&&(s=function(){});var a=e["licenseResponse"];return _0xa099("0x2")!=typeof a&&(a=function(){}),new Promise(function(e,n){o(t,r,i,s,a)[_0xa099("0x29")](function(t){var i=t[_0xa099("0x3a")];t["close"](),e(i)},function(e){n(e)})})}function c(e){return new Promise(function(t){var i=n();navigator[_0xa099("0x2d")](i[_0xa099("0x2e")],[i[_0xa099("0x2f")],i[_0xa099("0x30")]])[_0xa099("0x29")](function(e){return e[_0xa099("0x3b")]()})[_0xa099("0x2b")](function(){t()})[_0xa099("0x29")](function(n){var r=n[_0xa099("0x32")](i["sessionType"]);window[_0xa099("0x3c")](function(){r[_0xa099("0x3d")](e)[_0xa099("0x29")](function(e){e&&r["remove"](),t()},t)},d)})[_0xa099("0x2b")](function(){t()})})}var u=i(6),d=500;t[_0xa099("0x3e")]=a,t[_0xa099("0x3f")]=c}})})}})});